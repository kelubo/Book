<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>c01</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body id="4OIQ0-4cbd95e5336c4fe1b8728c179770ce3b" class="calibre">
<div id="c01" class="calibre1">
<p class="experiment-number1" id="t5"><span class="charoverride12">Experiment #143 — Delay Circuits</span></p>
<p class="body-text9"><span class="charoverride5">The Warner Brothers cartoon character Marvin the Martian seethes, “delays, delays!” But there is no need for a ham radio electronics designer to become “verry annngry.” Not at all! Delay circuits are found in many types of ham radio gear, and might even prevent an Earth-shattering ka-boom! This month’s column serves up two sample circuits to satisfy your search for spare seconds.</span></p>
<p class="subhead1"><span class="charoverride12">Pulse Stretcher</span></p>
<p class="body-text9"><span class="charoverride5">There are many applications to “stretch” a short pulse into a longer one. A circuit that detects RF might only generate a very short pulse if the incoming signal is brief or weak. That might generate a pulse too short to reliably trigger a logic circuit, be detected by a microprocessor, or light an indicator long enough to be easily seen by the naked eye. Switching or power transients are another notoriously unreliable input signal. One simple and inexpensive solution is to use a spare logic gate or two and an RC timing network, as shown in Figure 1.</span></p>
<p class="figure"><img src="../images/00016.jpeg" alt="" class="calibre5"/></p>
<p class="body-text9"><span class="charoverride5">Let’s take the circuit in Figure 1A as an example. In its resting or </span><span class="charoverride13">quiescent</span><span class="charoverride5"> state, the input signal is </span><span class="scbf">LOW</span><span class="charoverride5">, the input connected to R and C is </span><span class="scbf">LOW</span><span class="charoverride5">, and the output of the </span><span class="scbf">OR</span><span class="charoverride5"> gate formed by the combined </span><span class="scbf">NOR</span><span class="charoverride5"> gate and inverter is also </span><span class="scbf">LOW.</span><span class="charoverride5"> As soon as the input pulse changes to </span><span class="scbf">HIGH</span><span class="charoverride5">, the output of the </span><span class="scbf">OR</span><span class="charoverride5"> gate also goes high. This causes current to flow through C, creating a voltage across R. Since C is assumed to be discharged, the initial voltage across R is approximately the same as the output signal, close to V+. Then it begins to drop according to the RC circuit’s time constant </span><span class="charoverride5">τ</span><span class="charoverride13"> = RC</span><span class="charoverride5">. In a bit more than one time constant </span><span class="charoverride5">τ</span><span class="charoverride5"> the voltage will have dropped enough at the </span><span class="scbf">OR</span><span class="charoverride5"> gate’s input to be a logic-level </span><span class="scbf">LOW</span><span class="charoverride5">. If the input pulse has ended by then, both inputs to the </span><span class="scbf">OR</span><span class="charoverride5"> gate will be </span><span class="scbf">LOW</span><span class="charoverride5"> and so the output of the </span><span class="scbf">OR</span><span class="charoverride5"> gate will return to </span><span class="scbf">LOW</span><span class="charoverride5">. If </span><span class="charoverride5">τ</span><span class="charoverride5"> is longer than the input pulse, the output pulse has been “stretched” to approximately </span><span class="charoverride13">RC</span><span class="charoverride5"> seconds. The output pulse will never be shorter than the input pulse. Why? (The output of the </span><span class="scbf">OR</span><span class="charoverride5"> gate will be high as long as either input is high.) </span></p>
<p class="body-text9"><span class="charoverride5">You can follow similar steps to figure out how the circuits work in Figures 1B – 1D. In all, there are four circuits for stretching and inverting either positive- or negative-going pulses. You’ll find that using an oscilloscope is the best way of watching both the input and output pulses. Use a 555 timer circuit as described in Experiment #5 as your pulse generator.</span><span class="charoverride14"><a id="ft11" href="part0005_split_004.html#fn11">1</a></span></p>
<p class="body-text9"><span class="charoverride5">The exact amount of stretching depends  on the logic switching thresholds of the logic family you are using. The closer the gate switching thresholds are to V+ and ground, the more the pulse will be stretched. For example, switching thresholds for the 4000-series of CMOS logic are about 10 and 90 percent of V+. Pulses will be stretched longer for this family of logic than for a logic family with thresholds closer to ½ V+. Why? (Because the voltage across R will have to decay longer to reach the lower switching threshold and that means the output pulse will stay </span><span class="scbf">HIGH</span><span class="charoverride5"> longer.)</span></p>
<p class="subhead1"><span class="charoverride12">Soft-start Circuit</span></p>
<p class="body-text9"><span class="charoverride5">Linear amplifiers and other equipment with high-voltage (HV) power supplies need a bit of delay between the time the power switch is turned </span><span class="scbf">ON</span><span class="charoverride5"> and the time full voltage is applied to the HV rectifiers and filter. The reason is </span><span class="charoverride13">inrush</span><span class="charoverride5"> </span><span class="charoverride13">current</span><span class="charoverride5">. If a linear power supply’s filter capacitors are discharged when power is applied, they act like a short-circuit during those first few cycles of rectified ac. This causes very high current pulses in the transformer windings and through the rectifiers as the capacitors charge up. </span></p>
<p class="body-text9"><span class="charoverride5">After a few cycles of ac and depending on the resistance of the rectifiers and transformer secondary winding, the filter capacitors are charged to near their peak value and the amount of current drops dramatically. During the charging period however, peak currents can be 10 to 20 times normal current or even higher, placing significant stress on all of the power supply components.</span></p>
<p class="body-text9"><span class="charoverride5">Circuits have been employed that slowly increase transformer input voltage with a </span><span class="scbf">TRIAC</span><span class="charoverride5"> or other variable ac source. The </span><span class="charoverride13">soft-start</span><span class="charoverride5"> circuit presented in Figure 2 is simpler and satisfies quite nicely the requirement to limit that surge current. It limits inrush current with a 10 </span><span class="charoverride5">Ω</span><span class="charoverride5"> power resistor. Until the relay activates, the 10 </span><span class="charoverride5">Ω</span><span class="charoverride5"> resistor is in series with the primary winding of the main power transformer. After a suitable delay, the relay contacts short out the 10 </span><span class="charoverride5">Ω</span><span class="charoverride5"> resistor and full power is applied to the main transformer.</span></p>
<p class="figure"><img src="../images/00017.jpeg" alt="" class="calibre5"/></p>
<p class="body-text9"><span class="charoverride5">To power the relay, an auxiliary power supply circuit is required. A small 12 V transformer supplies a 1N4001 diode and  2200 </span><span class="charoverride5" xml:lang="ar-SA">μ</span><span class="charoverride5">F in a half-wave rectifier circuit. At light loads, the filtered output voltage, </span><span class="charoverride13">V</span><span class="charoverride20">PS</span><span class="charoverride5">, will be about </span><span class="charoverride13">12 × 1.4 – 0.7 ≈ 16 </span><span class="charoverride5">V. (</span><span class="charoverride13">V</span><span class="charoverride20">PS</span><span class="charoverride13"> </span><span class="charoverride5">will drop closer to 12 V when the relay coil draws current from the supply.)</span></p>
<p class="body-text9"><span class="charoverride5">The timing of when the relay switches is determined by the 33 k </span><span class="charoverride5">Ω</span><span class="charoverride5"> resistor and 470 </span><span class="charoverride5" xml:lang="ar-SA">µ</span><span class="charoverride5">F capacitor. When power is applied with the 470 </span><span class="charoverride5" xml:lang="ar-SA">μF</span><span class="charoverride5"> capacitor completely discharged, it begins charging towards 16 V with a time constant of </span><span class="charoverride5">τ</span><span class="charoverride13"> = RC = 33 × 10</span><span class="charoverride21">3</span><span class="charoverride13"> × 470 × 10</span><span class="charoverride21">-6</span><span class="charoverride13"> = 15.5 </span><span class="charoverride5">s. </span></p>
<p class="body-text9"><span class="charoverride5">As the voltage across the 470 </span><span class="charoverride5" xml:lang="ar-SA">µ</span><span class="charoverride5">F capacitor (V</span><span class="charoverride15">CAP</span><span class="charoverride5">) increases, it approaches the </span><span class="charoverride13">gate threshold voltage</span><span class="charoverride5"> (</span><span class="charoverride13">V</span><span class="charoverride20">GS</span><span class="charoverride15">(</span><span class="charoverride20">Th</span><span class="charoverride15">)</span><span class="charoverride5">)</span><span class="charoverride13"> </span><span class="charoverride5">of the BS170 FET. This is the point at which the FET will rapidly turn on and conduct drain current, acting more or less like a switch. How quickly the gate voltage will reach 2 V is determined by the equation:</span></p>
<p class="body-text17"><img src="../images/00018.jpeg" alt="" class="calibre12"/></p>
<p class="body-text9"><span class="charoverride5">Two seconds is plenty of time for a power supply’s filter capacitors to charge up. (This and similar formulas for RC timing circuits are posted on the Hands-On Radio web page for this experiment.)</span></p>
<p class="body-text9"><span class="charoverride5">Most 12 V relay coils have a resistance of around 100 </span><span class="charoverride5">Ω</span><span class="charoverride5"> and so draw about 120 mA from a 12 V supply. If the </span><span class="charoverride13">on-resistance</span><span class="charoverride5"> </span><span class="charoverride13">(R</span><span class="charoverride20">DS</span><span class="charoverride15">(</span><span class="charoverride20">On</span><span class="charoverride15">)</span><span class="charoverride13">)</span><span class="charoverride5"> of the FET is a few ohms, it will dissipate </span><span class="charoverride13">P</span><span class="charoverride20">D</span><span class="charoverride13">=I</span><span class="charoverride20">D</span><span class="charoverride21">2</span><span class="charoverride13"> R</span><span class="charoverride20">DS</span><span class="charoverride15">(</span><span class="charoverride20">On</span><span class="charoverride15">)</span><span class="charoverride13">= 0.014 R</span><span class="charoverride20">DS</span><span class="charoverride15">(</span><span class="charoverride20">On</span><span class="charoverride15">)</span><span class="charoverride5"> watts, which is a minimal amount of heat. The 470 k</span><span class="charoverride5">Ω</span><span class="charoverride5"> resistor discharges the timing capacitor when power is removed so that the circuit will operate properly when power is again switched on. The second 1N4001 diode clamps the coil voltage so that a nasty </span><span class="charoverride13">inductive kickback</span><span class="charoverride5"> transient doesn’t destroy the FET when the relay is turned off.</span></p>
<p class="body-text9"><span class="charoverride5">All of this is quite loosely estimated, which means there is plenty of room for experimentation by you! There is a lot of variation between relays — not only in the coil’s resistance but the relay’s </span><span class="charoverride13">pull-in voltage</span><span class="charoverride5"> at which the coil will actually switch the contacts. Try changing the timing components, use different types of FETs or redesign the circuit to use an NPN transistor like the 2N4401, or maybe scrounge up some different relays and try them out. This will help you get a feel for how much variation you can expect out there in the real world.</span></p>
<p class="body-text9"><span class="charoverride5">You needn’t actually apply the soft-start circuit to a high-voltage supply — it will operate just fine on its own. You can get a sense for the timing just by listening to the relay or wiring an LED circuit through the normally-open contacts. If you use this circuit on an actual ac power supply, though, please remember that the 10 </span><span class="charoverride5">Ω</span><span class="charoverride5"> resistor and the relay contacts carry the full ac mains voltage. That hazard is easy to forget when working with low-voltage circuits! Make sure you keep the ac wiring insulated and well away from the low-voltage dc circuits. No surprises, please!</span></p>
<p class="notes"> </p>
<p class="notes"> </p>
<p class="notes"> </p>
<p class="notes"><span class="charoverride19"><a id="fn11" href="part0005_split_004.html#ft11">1</a></span><span class="charoverride5">All previous Hands-On Radio experiments are available to ARRL members at <a href="http://www.arrl.org/hands-on-radio" class="calibre7">www.arrl.org/hands-on-radio</a>.</span></p>


<div class="calibre11" id="calibre_pb_8"></div>
</div>
</body></html>
