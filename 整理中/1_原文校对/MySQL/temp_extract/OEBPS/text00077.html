<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" style="font-size:1.250rem;">
<head><title></title>
<link href="flow0001.css" rel="stylesheet" type="text/css" />
</head>
<body>
<h3 class="p3">5.2.2　默认单实例MySQL登录方法</h3>
<p class="ziti">默认单实例MySQL的登录命令如下：</p>
<hr/>
<pre class="ziti1">1      mysql            #&lt;==刚装完系统无密码情况下的登录方式。不要密码。
2      mysql -uroot     #&lt;==刚装完系统无密码情况下的登录方式。不要密码。
3      mysql -uroot -p  #&lt;==这里是标准的dba命令行登录命令，交互式输入密码可有效防止密码泄露。
4      mysql -uroot -p’oldboy123’  #&lt;==命令行一般不这样使用，因为密码是明文的，5.6版本
                                  只要一发现这样使用就会输出警告。</pre>
<hr/>
<p class="ziti">下面先介绍几个防止MySQL密码泄露的小妙招（MySQL安全策略）。</p>
<p class="ziti">第一个小妙招：可以通过环境变量来强制Linux不记录敏感历史命令。</p>
<p class="ziti">在命令行执行“HISTCONTROL=ignorespace”后，再在输入带密码的命令前面加一个空格登录，登录命令不会被记录到历史记录里。示例如下：</p>
<hr/>
<pre class="ziti1">[root@oldboy ~]# HISTCONTROL=ignorespace     #&lt;==这里是临时生效，要想永久生效，
                                            请放入/etc/bashrc。
[root@oldboy ~]#  mysql -uroot -p'oldboy123' #&lt;==命令的开头要多一个空格。</pre>
<hr/>
<p class="ziti">第二个小妙招：操作完敏感的命令后及时删除命令行记录。</p>
<p class="ziti">可执行“history-d历史命令序号”清除指定历史记录命令：</p>
<hr/>
<pre class="ziti1">[root@oldboy ~]# history|tail -4     #&lt;==显示历史记录。
  252  mysql -uroot -p'oldboy123'    #&lt;==此条带密码，敏感，待删除。
  253  pwd
  254  history
  255  history|tail -4
[root@oldboy ~]# history -d 252      #&lt;==删除序号为252的历史记录。
[root@oldboy ~]# history|tail -5
  252  pwd                           #&lt;==序号252对应的带密码登录的命令已经消失。
  253  history
  254  history|tail -4
  255  history -d 252
  256  history|tail -5</pre>
<hr/>
<p class="ziti">可执行“history-c”清除所有记录：</p>
<hr/>
<pre class="ziti1">[root@oldboy ~]# history -c
[root@oldboy ~]# history
    1  history</pre>
<hr/>
<p class="ziti">也可执行“&gt;~/.bash_history”清除历史记录文件：</p>
<p class="ziti">第三个小妙招：为带密码的启动脚本以及备份脚本等加700权限，用户和组改为root。示例如下：</p>
<hr/>
<pre class="ziti1">chmod 700 /data/3306/mysql      #&lt;==如果采用kill信号的关闭方式数据库，可不执行。
chmod 700 /server/scripts/bak.sh    #&lt;==将密码写入my.cnf配置文件，使得执行备份
                                    命令不需要加密码。</pre>
<hr/>
<p class="ziti">第四个小妙招：把密码写入my.cnf配置文件并加600权限，用户和组改为mysql。示例如下：</p>
<hr/>
<pre class="ziti1">[root@oldboy ~]# cp /application/mysql/my.cnf /etc/
[root@oldboy ~]# grep -A 2 client /etc/my.cnf    #&lt;==配置文件开头添加如下三行，
                                                 无须重启服务。
[client]                   #&lt;==客户端模块标签。
User = root                #&lt;==用户参数及密码。
Password = oldboy123       #&lt;==密码参数及密码。
[root@oldboy ~]# mysql     #&lt;==此时登录数据库就不用输入密码了。
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 5.6.40 Source distribution
...省略若干行...
Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.
mysql&gt;</pre>
<hr/>
</body>
</html>
