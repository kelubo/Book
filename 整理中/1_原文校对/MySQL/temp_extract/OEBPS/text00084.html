<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" style="font-size:1.250rem;">
<head><title></title>
<link href="flow0001.css" rel="stylesheet" type="text/css" />
</head>
<body>
<h3 class="p3">5.4.2　为管理员root用户设置及修改密码</h3>
<p class="p6">1.为root用户设置密码</p>
<p class="ziti">刚安装完MySQL时是没有密码的，此时可以使用下面的命令为MySQL设置密码。</p>
<hr/>
<pre class="ziti1">mysqladmin -u root password 'oldboy123' #&lt;==适合单实例。
mysqladmin -u root password 'oldboy123' -S /data/3306/mysql.sock
                                        #&lt;==适合多实例。
提示：命令是在Linux命令行执行的，而不是在mysql命令行。</pre>
<hr/>
<p class="p6">2.为root用户修改密码的方法一：Linux命令行修改法</p>
<p class="ziti">在Linux命令行下修改密码适合于已知密码的场合，此时可利用mysqladmin进行密码修改，示例如下：</p>
<hr/>
<pre class="ziti1">mysqladmin -u root -p'oldboy123' password 'oldboy' #&lt;== oldboy456为原密码，
                                                 新密码为oldboy。
mysqladmin -u root -p'oldboy' password 'oldboy123' -S /data/3306/mysql.sock
                                              #&lt;==适合多实例方式。
提示：读者练习完后请把密码依旧修改为oldboy123，本书就是这样做的。</pre>
<hr/>
<p class="p6">3.为root用户修改密码的方法二：SQL语句修改法</p>
<p class="ziti">在MySQL命令行下修改密码常用于遗忘了密码的情况，或者给不熟悉Linux命令行管理的人员使用，这里的操作命令略微复杂一些，不过后文会有细致讲解。</p>
<hr/>
<pre class="ziti1">mysql&gt; UPDATE mysql.user SET password=PASSWORD("oldboy123") WHERE user='root' and host='localhost';
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0
mysql&gt; flush privileges; #&lt;==刷新权限使得修改密码生效。
Query OK, 0 rows affected (0.00 sec)</pre>
<hr/>
<p class="ziti6"><img alt="" class="formula-1-5em" src="Image00006.jpg" />
 <span class="yanse">提示：</span>
</p>
<p class="ziti6">1）此法是SQL语句的DML语句，必须指定where条件（具体的用户和主机）。</p>
<p class="ziti6">2）必须使用PASSWORD()函数来加密更改密码，才能保证数据库里的密码是加密的。</p>
<p class="ziti6">3）此命令是在mysql命令行执行的，而不是在Linux命令行执行。</p>
<p class="ziti6">4）此法更适合密码丢失后，通过“--skip-grant-tables”参数启动数据库，再对密码进行修改的情形。</p>
<p class="p6">4.为root用户修改密码的方法三：SQL语句修改法</p>
<p class="ziti">下述方法看起来简单，但也有很大的局限性：</p>
<hr/>
<pre class="ziti1">mysql&gt; set password=password('oldboy');
Query OK, 0 rows affected (0.00 sec)
mysql&gt; flush privileges;
Query OK, 0 rows affected (0.00 sec)
mysql&gt; quit
Bye</pre>
<hr/>
<p class="ziti">该方法的局限性表现在如下两个方面。</p>
<p class="ziti">1）本方法仅为修改当前用户密码。</p>
<p class="ziti">2）不适合通过“--skip-grant-tables”方式启动后修改密码，若此时采用该方法，将会报错，报错提示如下：</p>
<hr/>
<pre class="ziti1">mysql&gt;set password=password('oldboy');
ERROR 1290 (HY000): The MySQL server is running with the --skip-grant-tables option so it cannot execute this statement</pre>
<hr/>
</body>
</html>
