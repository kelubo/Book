<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="zh-CN">
  <head>
    <title>未知</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="../../stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="../../page_styles.css"/>
</head>
  <body class="calibre"> 
 <h2 id="A26f2009f-0c06-4636-be5a-bb9ec52ea9dd" class="calibre13">Chapter 10<br class="calibre8"/> 第十章 树莓派基础软件操作</h2> 
 <p class="calibre3">在选择完硬件以后，需要安装配置软件来让树莓派运行，最基础的软件就是它的操作系统，本章介绍树莓派操作系统的相关操作。</p> 
 <h3 id="A0430c798-b39f-4562-a4a1-8537d15387e3" class="calibre14">10.1 操作系统的安装</h3> 
 <p class="calibre3">树莓派操作系统可以从下列发行版本中进行选择（下载网址：https：//www.raspberrypi.org/）：</p> 
 <p class="calibre3"><img alt="" class="u58" src="../Images/160_01.jpg" width="40" height="44"/>Raspbian “wheezy”。Debian 7在ARMv6编译版的基础上，加上针对树莓派深度定制的硬件驱动与软件程序，是官方推荐系统。</p> 
 <p class="calibre3"><img alt="" class="u58" src="../Images/160_02.jpg" width="40" height="45"/>Raspbian “Jessie”。Debian 8在ARM编译版的基础上，加上针对树莓派深度定制的硬件驱动与软件程序，是官方推荐系统。Debian的软件策略偏保守，稳定第一，升级是次要的。</p> 
 <p class="calibre3"><img alt="" class="u58" src="../Images/160_03.jpg" width="40" height="44"/>Raspbain “Stretch With Desktop”。树莓派Debian 9系统轻量级版，树莓派官方系统，带图形界面。特点是兼容性和性能优秀。</p> 
 <p class="calibre3"><img alt="" class="u58" src="../Images/160_04.jpg" width="40" height="45"/>Raspbain“Stretch Lite”。树莓派Debian 9系统轻量级版，树莓派官方系统，具最小图形界面。特点是兼容性和性能优秀，比Desktop版本的安装包更小。</p> 
 <p class="calibre3">安装步骤如下：</p> 
 <p class="calibre3">（1）打开网页：https：//www.raspberrypi.org/downloads/，如图10-1所示，开始下载。</p> 
 <p class="calibre3">其中“NOOBS（New Out Of the Box Software）”是专为Raspberry Pi打造的简单易用的图形界面的操作系统安装管理工具，这里选择右边的选项“RASPBIAN”，单击后出现如图10-2所示的界面。</p> 
 <p class="calibre3">其中RAsblan Stretch With Desktop Rasbian是带图形界面的操作系统，Stretch Lite是最小图形界面的操作系统。</p> 
 <div class="center"> 
  <img alt="" class="u301" src="../Images/161_01.jpg" width="1179" height="1052"/> 
  <p class="imgtitle">图10-1 下载页面</p> 
 </div> 
 <div class="center"> 
  <img alt="" class="u302" src="../Images/161_02.jpg" width="1241" height="992"/> 
  <p class="imgtitle">图10-2 下载RASPBIAN Stretch</p> 
 </div> 
 <p class="calibre3">（2）完成树莓派操作系统的下载以后，下载树莓派系统烧录软件：Win32Disk Imager，下载网址：https：//sourceforge.net/projects/win32diskimager/files/latest/download。</p> 
 <p class="calibre3">（3）将安装操作系统的Micro SD卡（如图10-3所示），插入到Micro SD卡USB读卡器中，如图10-4所示。</p> 
 <div class="center"> 
  <img alt="" class="u303" src="../Images/162_01.jpg" width="806" height="599"/> 
  <p class="imgtitle">图10-3 Micro SD卡</p> 
 </div> 
 <div class="center"> 
  <img alt="" class="u304" src="../Images/162_02.jpg" width="720" height="523"/> 
  <p class="imgtitle">图10-4 Micro SD卡USB读卡器</p> 
 </div> 
 <p class="calibre3">（4）解压下载的树莓派操作系统，格式为IMG文件，如图10-5所示。</p> 
 <div class="center"> 
  <img alt="" class="u305" src="../Images/162_03.jpg" width="1268" height="198"/> 
  <p class="imgtitle">图10-5 解压的树莓派操作系统</p> 
 </div> 
 <p class="calibre3">（5）将有Micro SD卡的USB读卡器插入PC的USB接口，运行Win32Disk Imager系统烧录软件，如图10-6所示，可以看到插入的Micro SD卡盘符，Device下面是Micro SD卡的盘符。</p> 
 <div class="center"> 
  <img alt="" class="u306" src="../Images/162_04.jpg" width="988" height="443"/> 
  <p class="imgtitle">图10-6 Win32 Disk Imager运行界面</p> 
 </div> 
 <p class="calibre3">（6）在Win32Disk Imager系统烧录软件界面，单击选择烧写树莓派操作系统的镜像文件（IMG格式），如图10-7所示。</p> 
 <div class="center"> 
  <img alt="" class="u307" src="../Images/162_05.jpg" width="991" height="443"/> 
  <p class="imgtitle">图10-7 选择树莓派操作系统镜像文件</p> 
 </div> 
 <p class="calibre3">（7）单击“Write”按钮进行系统烧录，如图10-8所示。</p> 
 <div class="center"> 
  <img alt="" class="u308" src="../Images/163_01.jpg" width="967" height="748"/> 
  <p class="imgtitle">图10-8 单击“Write”按钮</p> 
 </div> 
 <p class="calibre3">（8）单击“Yes”按钮，开始系统卡的烧录，如图10-9所示。</p> 
 <div class="center"> 
  <img alt="" class="u309" src="../Images/163_02.jpg" width="1113" height="508"/> 
  <p class="imgtitle">图10-9 开始烧录</p> 
 </div> 
 <p class="calibre3">（9）在系统卡烧录的过程中，需要等待一会儿，到进度条为100%时表示烧录完成，如图10-10所示。</p> 
 <div class="center"> 
  <img alt="" class="u310" src="../Images/163_03.jpg" width="1117" height="495"/> 
  <p class="imgtitle">图10-10 烧录过程</p> 
 </div> 
 <p class="calibre3">（10）完成烧录后，在弹出的对话框中，单击“OK”按钮就可以完成系统的烧录，如图10-11所示。</p> 
 <div class="center"> 
  <img alt="" class="u311" src="../Images/164_01.jpg" width="1116" height="525"/> 
  <p class="imgtitle">图10-11 完成烧录</p> 
 </div> 
 <p class="calibre3">在计算机窗口查看Micro SD卡的状态，如图10-12所示。</p> 
 <div class="center"> 
  <img alt="" class="u312" src="../Images/164_02.jpg" width="1214" height="1284"/> 
  <p class="imgtitle">图10-12 烧写目录</p> 
 </div> 
 <p class="calibre3">此种状态说明程序已经烧录成功，但是由于Windows下不会显示出Linux的分区，所以显示16GB SD卡剩余空间只有55.9MB，这个在树莓派启动以后的配置文件中可以进行空间释放。</p> 
 <h3 id="Abd6ef8e9-fbfd-4640-ab62-3af10eb1eddf" class="calibre14">10.2 无线网络连接</h3> 
 <p class="calibre3">将完成烧写操作系统的Micro SD卡插入树莓派，启动树莓派系统，启动后的界面如图10-13所示。</p> 
 <div class="center"> 
  <img alt="" class="u313" src="../Images/165_01.jpg" width="1280" height="724"/> 
  <p class="imgtitle">图10-13 树莓派系统启动界面</p> 
 </div> 
 <p class="calibre3">打开控制台窗口，执行命令ifconfig，显示网络设备信息，如图10-14所示，可以看到树莓派无线网卡wlan0的IP地址为：192.148.1.101。</p> 
 <div class="center"> 
  <img alt="" class="u314" src="../Images/165_02.jpg" width="1189" height="774"/> 
  <p class="imgtitle">图10-14 显示网络设备信息</p> 
 </div> 
 <p class="calibre3">在启动树莓派后，单击主界面右上角的无线网络图标，选择无线标识进行连接，如图10-15所示。</p> 
 <div class="center"> 
  <img alt="" class="u315" src="../Images/166_01.jpg" width="892" height="742"/> 
  <p class="imgtitle">图10-15 树莓派连接无线</p> 
 </div> 
 <h3 id="Ad04d61a2-d620-4d75-902d-18affff9dc60" class="calibre14">10.3 远程控制</h3> 
 <p class="calibre3">在启动连接网络后，可以通过PC远程控制树莓派系统，这样操作就更方便了。</p> 
 <h4 class="sigil_not_in_toc" id="A304500a5-975a-462b-a04a-7cb02b542a42">10.3.1 远程控制台控制</h4> 
 <p class="calibre3">远程控制台控制操作有两种方法。</p> 
 <p class="calibre3"><b class="calibre6">1．使用SecureFX工具</b></p> 
 <p class="calibre3">SecureFX是一款由VanDyke Software Inc.（范戴克软件公司）研发生产的支持普通FTP标准和安全数据传输标准（SFTP或者在SSH2上的FTP）的FTP客户端软件。</p> 
 <p class="calibre3">下载SecureFX工具包，如图10-16所示。</p> 
 <p class="calibre3">运行其中的SecureFXPortable.exe文件，开始远程连接，如图10-17所示。</p> 
 <div class="center"> 
  <img alt="" class="u316" src="../Images/166_02.jpg" width="970" height="613"/> 
  <p class="imgtitle">图10-16 SecureFX工具</p> 
 </div> 
 <div class="center"> 
  <img alt="" class="u317" src="../Images/166_03.jpg" width="641" height="626"/> 
  <p class="imgtitle">图10-17 远程连接</p> 
 </div> 
 <p class="calibre3">输入用户名：pi，输入密码：raspberry，如图10-18所示。</p> 
 <div class="center"> 
  <img alt="" class="u318" src="../Images/167_01.jpg" width="735" height="404"/> 
  <p class="imgtitle">图10-18 输入用户名和密码</p> 
 </div> 
 <p class="calibre3">登录后的界面如图10-19所示，使用SecureFX可以在登录的PC和树莓派之间传输文件，也可以在树莓派的目录中操作文件。</p> 
 <div class="center"> 
  <img alt="" class="u319" src="../Images/167_02.jpg" width="1280" height="664"/> 
  <p class="imgtitle">图10-19 SecureFX登录界面</p> 
 </div> 
 <p class="calibre3"><b class="calibre6">2．使用SecureCRT工具</b></p> 
 <p class="calibre3">SecureCRT是一款支持SSH（SSH1和SSH2）的终端仿真程序，简单地说，是Windows下登录UNIX或Linux服务器主机的软件。SecureCRT支持SSH，同时支持Telnet和rlogin协议。SecureCRT是一款用于连接运行包括Windows、UNIX和VMS的理想工具。通过使用内含的VCP命令程序可以进行加密文件的传输。</p> 
 <p class="calibre3">下载SecureCRT工具包，如图10-20所示。运行其中的SecureCRTPortable.exe文件，开始远程连接，输入用户名和密码（用户名：pi，密码：raspberry），如图10-21所示。</p> 
 <div class="center"> 
  <img alt="" class="u320" src="../Images/167_03.jpg" width="851" height="462"/> 
  <p class="imgtitle">图10-20 SecureCRT工具</p> 
 </div> 
 <div class="center"> 
  <img alt="" class="u321" src="../Images/167_04.jpg" width="653" height="466"/> 
  <p class="imgtitle">图10-21 远程连接</p> 
 </div> 
 <p class="calibre3">SecureCRT远程登录界面如图10-22所示。</p> 
 <div class="center"> 
  <img alt="" class="u322" src="../Images/168_01.jpg" width="1242" height="874"/> 
  <p class="imgtitle">图10-22 SecureCRT远程登录界面</p> 
 </div> 
 <h4 class="sigil_not_in_toc" id="A962700a7-876f-46c9-8925-29e1fa22e212">10.3.2 远程图形化控制</h4> 
 <p class="calibre3"><b class="calibre6">1．安装xrdp</b></p> 
 <p class="calibre3">一般情况下，如果需要登录远程Linux系统，会使用ssh/telnet或者SecureCRT来完成，但是这两个都是控制台登录，字符操作界面，而树莓派启动以后是窗口系统，</p> 
 <p class="calibre3">Windows的远程桌面基于RDP协议，在Linux下是开源的rdpserver的，这就是xrdp。</p> 
 <p class="calibre3">在树莓派中安装xrdp的命令：sudo apt-get install xrdp，如图10-23所示。</p> 
 <div class="center"> 
  <img alt="" class="u323" src="../Images/168_02.jpg" width="1280" height="527"/> 
  <p class="imgtitle">图10-23 安装xrdp</p> 
 </div> 
 <p class="calibre3">如果安装xrdp不成功，请先运行命令：sudo apt-get update。</p> 
 <p class="calibre3"><b class="calibre6">2．Windows远程桌面连接</b></p> 
 <p class="calibre3">选择Windows的“附件”＞“远程桌面连接”命令，如图10-24所示。</p> 
 <div class="center"> 
  <img alt="" class="u324" src="../Images/169_01.jpg" width="1091" height="689"/> 
  <p class="imgtitle">图10-24 远程桌面连接</p> 
 </div> 
 <p class="calibre3">单击“连接”按钮，在新窗口输入用户名和密码（用户名：pi，密码：raspberry），如图10-25所示。登录到树莓派的主界面，如图10-26所示。</p> 
 <div class="center"> 
  <img alt="" class="u325" src="../Images/169_02.jpg" width="823" height="540"/> 
  <p class="imgtitle">图10-25 输入用户名和密码</p> 
 </div> 
 <div class="center"> 
  <img alt="" class="u326" src="../Images/169_03.jpg" width="860" height="540"/> 
  <p class="imgtitle">图10-26 登录树莓派</p> 
 </div> 
 <h3 id="A7fd05afd-b530-4f58-a4f9-a053f5b85d2f" class="calibre14">10.4 中文配置及输入法安装</h3> 
 <p class="calibre3">通过前面操作可以远程图形化控制树莓派，由于树莓派默认采用英文字库，而且系统里没有预装中文字库，所以即使在配置界面设置为中文，也不会显示中文，只会显示一堆方块，因此需要手动来安装中文字体。</p> 
 <p class="calibre3">启动树莓派一个控制台，使用安装中文字库的命令：sudo apt-get install ttf-wqy-zenhei，如图10-27所示。</p> 
 <p class="calibre3">在树莓派控制台输入命令：sudo raspi-config，选择“change_locale”选项，如图10-28所示。</p> 
 <p class="calibre3">在Configuring Locale界面使用键盘的空格键选择“zh_CN.UTF-8”选项，如图10-29所示。</p> 
 <div class="center"> 
  <img alt="" class="u327" src="../Images/170_01.jpg" width="1120" height="826"/> 
  <p class="imgtitle">图10-27 安装中文字库</p> 
 </div> 
 <div class="center"> 
  <img alt="" class="u328" src="../Images/170_02.jpg" width="1120" height="736"/> 
  <p class="imgtitle">图10-28 树莓派配置raspi-config</p> 
 </div> 
 <div class="center"> 
  <img alt="" class="u329" src="../Images/170_03.jpg" width="1280" height="417"/> 
  <p class="imgtitle">图10-29 选择中文编码</p> 
 </div> 
 <p class="calibre3">配置完成后如图10-30所示。然后输入命令：sudo reboot，重新启动系统。重启树莓派后即可发现显示界面已经变成了中文界面，如图10-31所示。</p> 
 <div class="center"> 
  <img alt="" class="u330" src="../Images/171_01.jpg" width="862" height="563"/> 
  <p class="imgtitle">图10-30 配置完成</p> 
 </div> 
 <div class="center"> 
  <img alt="" class="u331" src="../Images/171_02.jpg" width="865" height="563"/> 
  <p class="imgtitle">图10-31 树莓派中文界面</p> 
 </div> 
 <p class="calibre3">然后安装中文输入法，命令为：sudo apt-get install scim-pinyin，如图10-32所示。</p> 
 <div class="center"> 
  <img alt="" class="u332" src="../Images/171_03.jpg" width="1104" height="725"/> 
  <p class="imgtitle">图10-32 安装中文输入法</p> 
 </div> 
 <p class="calibre3">再次使用命令：sudo reboot，重启树莓派，重启之后就可以正常使用中文输入法了，切换中文输入法同样使用快捷键【Ctrl+Space】。</p> 
 <h3 id="Aa43702e9-62a6-41ed-bc47-72042d4a8573" class="calibre14">10.5 使用Scratch</h3> 
 <p class="calibre3">Scratch是一款由麻省理工学院（MIT）设计开发的图形化编程工具。其特点是：使用者可以不认识英文单词，也可以不会使用键盘，构成程序的命令和参数通过积木形状的模块来实现，用鼠标拖动模块到程序编辑栏就可以了。在树莓派的系统中已经集成了Scratch环境，如图10-33所示。</p> 
 <div class="center"> 
  <img alt="" class="u333" src="../Images/172_01.jpg" width="1280" height="618"/> 
  <p class="imgtitle">图10-33 Scratch环境</p> 
 </div> 
 <h3 id="Ac738534e-29ca-4d6b-a9a5-5b136719c206" class="calibre14">10.6 树莓派配置</h3> 
 <p class="calibre3">Raspi-config（Raspberry Pi Software Configuration Tool）是树莓派的官方配置工具，使用它可以对树莓派进行很多系统配置。比如，扩展树莓派的根分区、设置启动树莓派时进入的界面、修改树莓派的默认用户密码、更改语言、设置时区、超频等。</p> 
 <p class="calibre3">在树莓派中进行配置有两种方法。</p> 
 <p class="calibre3">（1）在树莓派控制台输入命令：sudo raspi-config，如图10-34所示，选择不同的选项进行配置。</p> 
 <div class="center"> 
  <img alt="" class="u334" src="../Images/172_02.jpg" width="1157" height="752"/> 
  <p class="imgtitle">图10-34 控制台配置</p> 
 </div> 
 <p class="calibre3">（2）在树莓派主界面选择“首选项”＞“Raspberry Pi Configuration”命令，进行图形化配置，如图10-35所示。</p> 
 <div class="center"> 
  <img alt="" class="u335" src="../Images/173_01.jpg" width="1280" height="682"/> 
  <p class="imgtitle">图10-35 图形化配置界面</p> 
 </div> 
 <h3 id="A4a4b1ca1-24ac-4806-847a-c742952ca1bc" class="calibre14">10.7 安装GPIO库</h3> 
 <p class="calibre3">通过GPIO访问树莓派硬件之前，需要安装Python和GPIO库。在安装GPIO库之前，确保系统安装了Python-dev包，安装方法是在启动树莓派一个控制台终端，执行sudo apt-get install python-dev python3-dev命令，如图10-36所示。</p> 
 <div class="center"> 
  <img alt="" class="u336" src="../Images/173_02.jpg" width="1280" height="512"/> 
  <p class="imgtitle">图10-36 安装Python-dev</p> 
 </div> 
 <p class="calibre3">Python-dev包安装完成以后，就可以安装树莓派Python的GPIO库，安装的方法有两种。</p> 
 <p class="calibre3">（1）从库中安装。</p> 
 <p class="calibre3">通过在命令行运行下面的指令，即可从库中安装GPIO库最新版。</p> 
 <div class="center">
  <img alt="" class="u337" src="../Images/173_03.jpg" width="1280" height="93"/>
 </div> 
 <p class="calibre3">执行sudo apt-get install python-rpi.gpio python3-rpi.gpio命令，如图10-37所示。</p> 
 <div class="center"> 
  <img alt="" class="u338" src="../Images/174_01.jpg" width="1211" height="522"/> 
  <p class="imgtitle">图10-37 安装GPIO库</p> 
 </div> 
 <p class="calibre3">（2）从源码编译。</p> 
 <p class="calibre3">如果想从源码编译，首先下载库（下载地址：https：//pypi.python.org/pypi/RPi.GPIO），如图10-38所示。文件名为RPi.GPIO-0.6.3.tar.gz，最新版本为0.6.3。</p> 
 <div class="center"> 
  <img alt="" class="u339" src="../Images/174_02.jpg" width="1280" height="524"/> 
  <p class="imgtitle">图10-38 RPi.GPIO库下载</p> 
 </div> 
 <p class="calibre3">下载完成后解压文件，打开终端控制台，解压命令如下：</p> 
 <div class="center">
  <img alt="" class="u340" src="../Images/174_03.jpg" width="1280" height="312"/>
 </div> 
 <h3 id="A3bfad3ed-a89e-45b3-99c8-7857e25c84c5" class="calibre14">10.8 本章小结</h3> 
 <p class="calibre3">本章介绍了树莓派软件的基本操作，这是操作树莓派的基础，内容包括网络连接、远程控制、中文化配置、GPIO库安装等，从而为后面树莓派的操作打好基础。</p> 
</body>
</html>
